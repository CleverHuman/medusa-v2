# é¡¹ç›®ç›¸å…³é…ç½®
medusa:
  # åç§°
  name: medusa
  # ç‰ˆæœ¬
  version: 1.0.0
  # ç‰ˆæƒå¹´ä»½
  copyrightYear: 2025
  # æ–‡ä»¶è·¯å¾„ ç¤ºä¾‹ï¼ˆ Windowsé…ç½®D:/ruoyi/uploadPathï¼ŒLinuxé…ç½® /home/ruoyi/uploadPathï¼‰
  profile:  /Users/jc/medusa/uploadPath
  # è·å–ipåœ°å€å¼€å…³
  addressEnabled: false
  # éªŒè¯ç ç±»å‹ math æ•°å­—è®¡ç®— char å­—ç¬¦éªŒè¯
  captchaType: math

# å¼€å‘ç¯å¢ƒé…ç½®
server:
  # æœåŠ¡å™¨çš„HTTPç«¯å£ï¼Œé»˜è®¤ä¸º8080
  port: 8080
  servlet:
    # åº”ç”¨çš„è®¿é—®è·¯å¾„
    context-path: /
    # Sessioné…ç½®
    session:
      timeout: 1d  # 24å°æ—¶è¶…æ—¶
  tomcat:
    # tomcatçš„URIç¼–ç 
    uri-encoding: UTF-8
    # è¿æ¥æ•°æ»¡åçš„æ’é˜Ÿæ•°ï¼Œé»˜è®¤ä¸º100
    accept-count: 1000
    threads:
      # tomcatæœ€å¤§çº¿ç¨‹æ•°ï¼Œé»˜è®¤ä¸º200
      max: 800
      # Tomcatå¯åŠ¨åˆå§‹åŒ–çš„çº¿ç¨‹æ•°ï¼Œé»˜è®¤å€¼10
      min-spare: 100

# æ—¥å¿—é…ç½®
logging:
  level:
    com.medusa: debug
    org.springframework: warn
    org:
      flywaydb: debug

# ç”¨æˆ·é…ç½®
user:
  password:
    # å¯†ç æœ€å¤§é”™è¯¯æ¬¡æ•°
    maxRetryCount: 5
    # å¯†ç é”å®šæ—¶é—´ï¼ˆé»˜è®¤10åˆ†é’Ÿï¼‰
    lockTime: 10

# Springé…ç½®
spring:
  # èµ„æºä¿¡æ¯
  messages:
    # å›½é™…åŒ–èµ„æºæ–‡ä»¶è·¯å¾„
    basename: i18n/messages
  profiles:
    active: druid
  flyway:
    enabled: true
    locations: classpath:db/migration
    sql-migration-prefix: V
    sql-migration-separator: __
    validate-on-migrate: true
    baseline-on-migrate: true
    clean-disabled: true
    out-of-order: false
    url: jdbc:mysql://${SPRING_DATASOURCE_URL:127.0.0.1}:3306/medusa?useUnicode=true&characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=true&serverTimezone=GMT%2B8
    user: root
    password: ${SPRING_DATASOURCE_ROOTPASSWORD:rootpassword}

  # æ–‡ä»¶ä¸Šä¼ 
  servlet:
    multipart:
      # å•ä¸ªæ–‡ä»¶å¤§å°
      max-file-size: 10MB
      # è®¾ç½®æ€»ä¸Šä¼ çš„æ–‡ä»¶å¤§å°
      max-request-size: 20MB
  # æœåŠ¡æ¨¡å—
  devtools:
    restart:
      # çƒ­éƒ¨ç½²å¼€å…³
      enabled: true
  data:
    # redis é…ç½®
    redis:
      # åœ°å€
      host: ${SPRING_REDIS_HOST:localhost}
      # ç«¯å£ï¼Œé»˜è®¤ä¸º6379
      port: 6379
      # æ•°æ®åº“ç´¢å¼•
      database: 0
      # å¯†ç 
      password: ${SPRING_REDIS_PASSWORD:}
      # è¿æ¥è¶…æ—¶æ—¶é—´
      timeout: 10s
      lettuce:
        pool:
          # è¿æ¥æ± ä¸­çš„æœ€å°ç©ºé—²è¿æ¥
          min-idle: 0
          # è¿æ¥æ± ä¸­çš„æœ€å¤§ç©ºé—²è¿æ¥
          max-idle: 8
          # è¿æ¥æ± çš„æœ€å¤§æ•°æ®åº“è¿æ¥æ•°
          max-active: 8
          # #è¿æ¥æ± æœ€å¤§é˜»å¡ç­‰å¾…æ—¶é—´ï¼ˆä½¿ç”¨è´Ÿå€¼è¡¨ç¤ºæ²¡æœ‰é™åˆ¶ï¼‰
          max-wait: -1ms

# tokené…ç½®
token:
  # ä»¤ç‰Œè‡ªå®šä¹‰æ ‡è¯†
  header: Authorization
  # ä»¤ç‰Œå¯†é’¥
  secret: abcdefghijklmnopqrstuvwxyz
  # ä»¤ç‰Œæœ‰æ•ˆæœŸï¼ˆé»˜è®¤30åˆ†é’Ÿï¼‰
  expireTime: 1440

# MyBatisé…ç½®
mybatis:
  # æœç´¢æŒ‡å®šåŒ…åˆ«å
  typeAliasesPackage: com.medusa.**.domain
  # é…ç½®mapperçš„æ‰«æï¼Œæ‰¾åˆ°æ‰€æœ‰çš„mapper.xmlæ˜ å°„æ–‡ä»¶
  mapperLocations: classpath*:mapper/**/*Mapper.xml
  # åŠ è½½å…¨å±€çš„é…ç½®æ–‡ä»¶
  configLocation: classpath:mybatis/mybatis-config.xml

# PageHelperåˆ†é¡µæ’ä»¶
pagehelper:
  helperDialect: mysql
  supportMethodsArguments: true
  params: count=countSql

# Swaggeré…ç½®
swagger:
  # æ˜¯å¦å¼€å¯swagger
  enabled: true
  # è¯·æ±‚å‰ç¼€
  pathMapping: /dev-api

# é˜²æ­¢XSSæ”»å‡»
xss:
  # è¿‡æ»¤å¼€å…³
  enabled: true
  # æ’é™¤é“¾æ¥ï¼ˆå¤šä¸ªç”¨é€—å·åˆ†éš”ï¼‰
  excludes: /system/notice
  # åŒ¹é…é“¾æ¥
  urlPatterns: /system/*,/monitor/*,/tool/*


btcpay:
  url: ${BTCPAY_URL:https://btcpay697645.lndyn.com}
  api:
    key: ${BTCPAY_API_KEY:45f2e9ad0866db09f90523f2fcaa88cf0f2ca0b8}
  store:
    id: ${BTCPAY_STORE_ID:FVhzUJuqZo6Gje3XawupiGy9MtZpYUXqrHmc8feG85cy}
  webhook-secret: AH3FLUrb1yjbUDZXDyyeeg
  webhook:
    enabled: false  # ğŸš« WEBHOOKåŠŸèƒ½å·²ç¦ç”¨
  default:
    currency: AUD
  notification:
    url: ${BTCPAY_NOTIFICATION_URL:https://6826-35-212-147-1.ngrok-free.app/api/open/btcpay/webhook}
  redirect:
    url: ${BTCPAY_REDIRECT_URL:http://your-domain.com/payment/result}
  # ç›‘æ§é…ç½®
  monitor:
    enabled: true
    pending-check-interval: 30000  # 30ç§’æ£€æµ‹å¾…æ”¯ä»˜è®¢å•
    expired-check-interval: 60000  # 60ç§’æ£€æµ‹è¿‡æœŸè®¢å•


#for testnet


    # btcpay:
#   url: ${BTCPAY_URL:https://testnet.demo.btcpayserver.org}
#   api:
#     key: ${BTCPAY_API_KEY:247f1d5c99c6e712089e6facefc65b58447afdab}
#   store:
#     id: ${BTCPAY_STORE_ID:nSK9CTvmtMixR6R2ZYebbxKxuseo1X99Z4LNimQNhi4}
#   webhook-secret: RJEZBkV3BFWZpoDVKXTUVb
#   default:
#     currency: AUD
#   notification:
#     url: ${BTCPAY_NOTIFICATION_URL:https://6826-35-212-147-1.ngrok-free.app/api/open/btcpay/webhook}
#   redirect:
#     url: ${BTCPAY_REDIRECT_URL:http://your-domain.com/payment/result}
