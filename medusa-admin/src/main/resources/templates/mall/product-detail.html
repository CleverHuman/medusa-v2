<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${product.name} + ' - Product Detail - Mall'">Product Detail - Mall</title>
    <style>
        body {
            background: #181818;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
        }
        .header {
            background: #111;
            color: #fff;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav {
            display: flex;
            gap: 2rem;
        }
        .nav a {
            color: #fff;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .nav a:hover {
            background: #222;
        }
        .main {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        /* 产品图片区域 */
        .product-image-section {
            background: #222;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        .product-image {
            width: 400px;
            height: 400px;
            object-fit: cover;
            border-radius: 12px;
            background: #181818;
            border: 2px solid #333;
        }
        
        /* 产品信息区域 */
        .product-info-section {
            background: #222;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        .product-name {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            color: #fff;
            text-align: center;
        }
        .product-description {
            color: #ccc;
            line-height: 1.8;
            font-size: 1.1rem;
            margin-bottom: 0;
        }
        
        /* 产品规格选择区域 */
        .product-specs-section {
            background: #222;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        .specs-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            table-layout: fixed;
        }
        .specs-table th {
            background: #181818;
            color: #ff9800;
            padding: 1rem;
            text-align: left;
            border: 1px solid #333;
            font-size: 1.1rem;
            font-weight: bold;
        }
        .specs-table th:nth-child(1) { width: 25%; } /* Maximum Sales Capacity */
        .specs-table th:nth-child(2) { width: 25%; } /* Price */
        .specs-table th:nth-child(3) { width: 20%; } /* Currency */
        .specs-table th:nth-child(4) { width: 30%; } /* Add to Cart */
        .specs-table td {
            background: #232323;
            padding: 1rem;
            border: 1px solid #333;
            vertical-align: middle;
            text-align: left;
        }
        .specs-table td:nth-child(4) {
            text-align: center;
        }
        .specs-table tr:hover td {
            background: #2a2a2a;
        }
        .spec-amount {
            font-size: 1.1rem;
            font-weight: bold;
            color: #fff;
        }
        .spec-price {
            font-size: 1.1rem;
            font-weight: bold;
            color: #ff9800;
        }
        .spec-currency {
            color: #fff;
        }
        
        /* 添加到购物车区域 */
        .add-to-cart-section {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
        }
        .quantity-input {
            width: 80px;
            height: 50px;
            padding: 0.5rem;
            border: 2px solid #333;
            border-radius: 8px;
            background: #181818;
            color: #fff;
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
        }
        .quantity-input:focus {
            border-color: #ff9800;
            outline: none;
        }
        .add-cart-btn {
            background: #28a745;
            color: #fff;
            border: none;
            padding: 1rem 2.5rem;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 160px;
        }
        .add-cart-btn:hover {
            background: #218838;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
        }
        
        /* 响应式设计 */
        @media (max-width: 900px) {
            .main { 
                padding: 1rem 0.5rem; 
            }
            .product-image { 
                width: 90vw; 
                height: 90vw; 
                max-width: 350px; 
                max-height: 350px; 
            }
            .product-name {
                font-size: 2rem;
            }
            .specs-table {
                font-size: 0.9rem;
            }
            .specs-table th, .specs-table td {
                padding: 0.5rem;
            }
            .quantity-input {
                width: 50px !important;
            }
            .add-cart-btn {
                padding: 0.4rem 0.8rem !important;
                font-size: 0.8rem !important;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <!-- LOGO -->
        <div class="logo">
            <img th:src="@{${logoUrl}}" alt="LOGO" style="height:60px;">
        </div>
        <nav class="nav">
            <a th:href="@{/mall/static/home}">HOME</a>
            <a th:href="@{/mall/static/digital-products}">DIGITAL PRODUCT</a>
            <a th:href="@{/mall/static/physical-products}">PHYSICAL PRODUCT</a>
            <a th:href="@{/mall/static/orders}">ORDERS</a>
            <a th:href="@{/mall/static/cart}">CART</a>
            <a th:href="@{/mall/static/profile}">PROFILE</a>
            <a th:if="${session.memberToken == null}" th:href="@{/mall/static/login}">LOGIN</a>
            <a th:if="${session.memberToken != null}" th:href="@{/mall/static/logout}">LOGOUT</a>
        </nav>
    </header>
    
    <main class="main">
        <!-- 产品图片区域 -->
        <div class="product-image-section">
            <img class="product-image" th:src="${product.imageUrl}" alt="Product Image" />
        </div>

        <!-- 产品信息区域 -->
        <div class="product-info-section">
            <div class="product-name" th:text="${product.name}">Product Name</div>
            <div class="product-description" th:text="${product.description}">Product description goes here.</div>
        </div>

        <!-- 产品规格选择区域 -->
        <div class="product-specs-section" th:if="${specs != null and #lists.size(specs) > 0}">
            <table class="specs-table">
                <thead>
                    <tr>
                        <th>Maximum Sales Capacity</th>
                        <th>Price</th>
                        <th>Currency</th>
                        <th>Add to Cart</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="spec : ${specs}">
                        <td>
                            <span class="spec-amount" th:text="${spec.formattedModel != null ? spec.formattedModel : (spec.model + (spec.unit != null ? spec.unit : ''))}">100g</span>
                        </td>
                        <td>
                            <span class="spec-price" th:text="${spec.price}">5.000</span>
                        </td>
                        <td>
                            <span class="spec-currency" th:text="${spec.currency}">AUD</span>
                        </td>
                        <td>
                            <form th:action="@{/mall/static/cart/update}" method="post" style="display:flex;align-items:center;gap:0.5rem;">
                                <input type="hidden" name="productId" th:value="${spec.id}" />
                                <input type="number" name="quantity" class="quantity-input" th:value="${defaultQuantity != null ? defaultQuantity : 1}" min="1" style="width:60px;" />
                                <button class="add-cart-btn" type="submit" style="padding:0.5rem 1rem;font-size:0.9rem;">Add to Cart</button>
                            </form>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </main>

    <!-- FOOTER -->
    <footer style="background:#222;color:#fff;padding:2rem 0;margin-top:2rem;">
        <div style="max-width:1200px;margin:0 auto;display:flex;justify-content:space-between;align-items:center;">
            <div>
                <img th:src="@{${footerLogo}}" alt="Footer Logo" style="height:60px;">
            </div>
            <div>
                <ul style="list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:0.5rem;">
                    <li th:each="link : ${footerLinks}">
                        <a th:href="${link.url}" th:text="${link.name}" style="color:#fff;text-decoration:none;font-size:14px;line-height:1.5;"></a>
                    </li>
                </ul>
            </div>
        </div>
    </footer>
</body>
</html> 