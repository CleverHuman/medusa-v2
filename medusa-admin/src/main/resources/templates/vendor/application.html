<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Co-op Member Application - Co-op Member Portal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- Redirect to noscript version if JavaScript is disabled -->
    <noscript>
        <meta http-equiv="refresh" content="0;url=/mall/static/vendor/application?noscript=true">
    </noscript>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .step-indicator {
            transition: all 0.3s ease;
        }
        .step-indicator.active {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            color: white;
        }
        .step-indicator.completed {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        .form-step {
            display: none;
            opacity: 0;
            transform: translateX(50px);
        }
        .form-step.active {
            display: block;
            opacity: 1;
            transform: translateX(0);
        }
        .input-field {
            transition: all 0.3s ease;
        }
        .input-field:focus {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .btn-primary {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #1e40af, #1e3a8a);
            transform: translateY(-2px);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            transition: all 0.3s ease;
        }
        .btn-secondary:hover {
            background: linear-gradient(135deg, #4b5563, #374151);
            transform: translateY(-2px);
        }
        .validation-error {
            color: #ef4444;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        .validation-success {
            color: #10b981;
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }
        .progress-bar {
            background: linear-gradient(90deg, #1e3a8a, #3b82f6);
            transition: width 0.5s ease;
        }
    </style>
</head>
<body class="bg-slate-50 text-gray-900">
    <!-- Navigation -->
    <nav class="bg-white/80 backdrop-blur-md fixed w-full top-0 z-50 border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-amber-500 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">V</span>
                    </div>
                    <span class="text-xl font-bold text-gray-900">Co-op Member Portal</span>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/mall/static/vendor/status" class="text-gray-600 hover:text-blue-600 transition-colors">Dashboard</a>
                    <a href="/mall/static/vendor/application" class="text-blue-600 font-semibold">Application</a>
                    <a href="/mall/static/vendor/products" class="text-gray-600 hover:text-blue-600 transition-colors">Products</a>
                    <a href="/mall/static/vendor/orders" class="text-gray-600 hover:text-blue-600 transition-colors">Orders</a>
                    <a href="/mall/static/vendor/bond-level" class="text-gray-600 hover:text-blue-600 transition-colors">Bond & Level</a>
                    <a href="/mall/static/vendor/withdrawal" class="text-gray-600 hover:text-blue-600 transition-colors">Withdrawal</a>
                    <!-- Auth status will be injected here by vendor-auth-status.js -->
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="pt-20 min-h-screen">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <!-- Page Title -->
            <div class="text-center mb-12">
                <div class="inline-flex items-center gap-2 px-3 py-1.5 border border-blue-200 rounded-full bg-blue-50 mb-4">
                    <span class="w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_0_3px_rgba(59,130,246,0.2)]"></span>
                    <span class="text-sm font-semibold tracking-wide text-blue-700">Co-op Member Onboarding</span>
                </div>
                <h1 class="text-4xl font-bold text-gray-900 mb-4">Become a Co-op Member (CM)</h1>
                <p class="text-xl text-gray-600 mb-4">Structured admission for serious participants. Bond-backed accountability, dispute resolution, and member governance â€” built to protect both buyers and members.</p>
                <div class="flex flex-wrap justify-center gap-3 mt-4">
                    <div class="inline-flex items-center gap-2 px-3 py-1.5 border border-gray-200 rounded-lg bg-gray-50 text-sm font-semibold text-gray-700">
                        <span>ðŸ›¡</span> Bond-backed protection
                    </div>
                    <div class="inline-flex items-center gap-2 px-3 py-1.5 border border-gray-200 rounded-lg bg-gray-50 text-sm font-semibold text-gray-700">
                        <span>ðŸ—³</span> Governance & voting rights
                    </div>
                    <div class="inline-flex items-center gap-2 px-3 py-1.5 border border-gray-200 rounded-lg bg-gray-50 text-sm font-semibold text-gray-700">
                        <span>ðŸ“ˆ</span> Reputation-based trade capacity
                    </div>
                </div>
                <div class="bg-amber-50 border border-amber-200 rounded-xl p-4 mt-6 max-w-2xl mx-auto">
                    <p class="text-sm text-amber-800 font-semibold leading-relaxed">
                        âš  Co-op membership requires accountability, bonding, and adherence to collective rules. If you're looking for anonymous or low-commitment selling, this is not the right platform.
                    </p>
                </div>
            </div>

            <!-- Progress Indicator -->
            <div class="mb-12">
                <div class="flex justify-between items-center mb-4">
                    <div class="step-indicator active w-12 h-12 rounded-full flex items-center justify-center font-semibold text-sm" data-step="1">1</div>
                    <div class="flex-1 h-2 bg-gray-200 mx-4 rounded-full">
                        <div class="progress-bar h-full rounded-full" style="width: 25%"></div>
                    </div>
                    <div class="step-indicator w-12 h-12 rounded-full flex items-center justify-center font-semibold text-sm bg-gray-200 text-gray-600" data-step="2">2</div>
                    <div class="flex-1 h-2 bg-gray-200 mx-4 rounded-full"></div>
                    <div class="step-indicator w-12 h-12 rounded-full flex items-center justify-center font-semibold text-sm bg-gray-200 text-gray-600" data-step="3">3</div>
                    <div class="flex-1 h-2 bg-gray-200 mx-4 rounded-full"></div>
                    <div class="step-indicator w-12 h-12 rounded-full flex items-center justify-center font-semibold text-sm bg-gray-200 text-gray-600" data-step="4">4</div>
                </div>
                <div class="flex justify-between text-sm text-gray-600">
                    <span>Basic Information</span>
                    <span>Product Details</span>
                    <span>Contact Information</span>
                    <span>Review & Submit</span>
                </div>
            </div>

            <!-- Form Container -->
            <div class="bg-white rounded-2xl shadow-lg p-8">
                <form id="applicationForm">
                    <!-- Step 1: Basic Information -->
                    <div class="form-step active" id="step1">
                        <h2 class="text-2xl font-semibold text-gray-900 mb-6">Basic Information</h2>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Co-op Member Name *</label>
                                <input type="text" id="vendorName" name="vendorName" required 
                                       class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <div class="validation-message" id="vendorName-validation"></div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Market Experience</label>
                                <select id="hasMarketExperience" name="hasMarketExperience" 
                                        class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                        onchange="toggleMarketExperience()">
                                    <option value="yes" selected>Yes</option>
                                    <option value="no">No</option>
                                </select>
                            </div>
                        </div>

                        <div id="marketExperienceSection" class="mt-6">
                            <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-4">
                                <div>
                                    <h3 class="text-lg font-medium text-gray-900">Market History *</h3>
                                    <p class="text-sm text-gray-500 mt-1">List the markets you have operated in and include the start and end year (multiple entries allowed).</p>
                                </div>
                                <button type="button" onclick="addMarketExperienceEntry()"
                                        class="mt-3 md:mt-0 inline-flex items-center px-4 py-2 rounded-lg bg-blue-50 text-blue-600 font-semibold hover:bg-blue-100 transition-colors">
                                    + Add Market
                                </button>
                            </div>
                            <div id="marketExperienceEntries" class="space-y-4"></div>
                            <input type="hidden" id="marketExperienceData" name="existingMarkets">
                            <div class="validation-message" id="marketExperienceData-validation"></div>
                            
                            <div class="mt-6 grid md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Total Years of Experience</label>
                                    <input type="number" id="experienceYears" name="experienceYears" min="0" 
                                           class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                           placeholder="Total years of market experience (optional)">
                                </div>
                            </div>
                        </div>

                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">PGP Public Key *</label>
                            <textarea id="pgpSignature" name="pgpSignature" required rows="8"
                                   class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm"
                                   placeholder="-----BEGIN PGP PUBLIC KEY BLOCK-----&#10;&#10;mQINBF...&#10;&#10;-----END PGP PUBLIC KEY BLOCK-----"></textarea>
                            <div class="validation-message" id="pgpSignature-validation"></div>
                            <p class="text-sm text-gray-500 mt-1">Paste your complete PGP public key here. Used for identity verification and secure communication.</p>
                        </div>

                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Location (State) *</label>
                            <p class="text-sm text-gray-500 mb-3">Select one or more states. The first selected state will be your primary location.</p>
                            <div class="space-y-2">
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="location" value="New South Wales" class="mr-3 location-checkbox" data-location="New South Wales (NSW)">
                                    <span>New South Wales (NSW)</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="location" value="Victoria" class="mr-3 location-checkbox" data-location="Victoria (VIC)">
                                    <span>Victoria (VIC)</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="location" value="Queensland" class="mr-3 location-checkbox" data-location="Queensland (QLD)">
                                    <span>Queensland (QLD)</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="location" value="South Australia" class="mr-3 location-checkbox" data-location="South Australia (SA)">
                                    <span>South Australia (SA)</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="location" value="Western Australia" class="mr-3 location-checkbox" data-location="Western Australia (WA)">
                                    <span>Western Australia (WA)</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="location" value="Tasmania" class="mr-3 location-checkbox" data-location="Tasmania (TAS)">
                                    <span>Tasmania (TAS)</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="location" value="Australian Capital Territory" class="mr-3 location-checkbox" data-location="Australian Capital Territory (ACT)">
                                    <span>Australian Capital Territory (ACT)</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="location" value="Northern Territory" class="mr-3 location-checkbox" data-location="Northern Territory (NT)">
                                    <span>Northern Territory (NT)</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="location" value="Online Service" class="mr-3 location-checkbox" data-location="Online Service">
                                    <span>Online Service</span>
                                </label>
                            </div>
                            <input type="hidden" id="location" name="location" required>
                            <input type="hidden" id="primaryLocation" name="primaryLocation">
                            <div class="validation-message" id="location-validation"></div>
                        </div>
                    </div>

                    <!-- Step 2: Product Details -->
                    <div class="form-step" id="step2">
                        <h2 class="text-2xl font-semibold text-gray-900 mb-6">Product Details</h2>
                        
                        <div class="mb-6">
                            <label class="block text-sm font-medium text-gray-700 mb-3">Product Categories * (Multiple Selection)</label>
                            <div class="grid md:grid-cols-3 gap-3">
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="productCategories" value="Physical" class="mr-3">
                                    <span>Physical</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="productCategories" value="Digital" class="mr-3">
                                    <span>Digital</span>
                                </label>
                                <label class="flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer">
                                    <input type="checkbox" name="productCategories" value="Service" class="mr-3">
                                    <span>Service</span>
                                </label>
                            </div>
                            <div class="validation-message" id="productCategories-validation"></div>
                        </div>

                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">IRL Experience</label>
                            <select id="offlineDelivery" name="offlineDelivery" 
                                    class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="no">No</option>
                                <option value="yes">Yes</option>
                            </select>
                        </div>

                        <div class="mt-6">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Product Description *</label>
                            <textarea id="productDescription" name="productDescription" rows="4" required
                                      class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">List out the products you are likely to sell.</textarea>
                            <div class="validation-message" id="productDescription-validation"></div>
                        </div>
                    </div>

                    <!-- Step 3: Contact Information -->
                    <div class="form-step" id="step3">
                        <h2 class="text-2xl font-semibold text-gray-900 mb-6">Contact Information</h2>
                        
                        <div class="mb-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Primary Contact * (Select at least one)</h3>
                            <div class="space-y-4">
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="flex items-center mb-2">
                                            <input type="checkbox" id="primaryTelegram" name="primaryContacts" value="telegram" class="mr-2">
                                            <span class="font-medium">Telegram</span>
                                        </label>
                                        <input type="text" id="telegramId" name="telegramId" 
                                               class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="@username" disabled>
                                    </div>
                                    
                                    <div>
                                        <label class="flex items-center mb-2">
                                            <input type="checkbox" id="primarySignal" name="primaryContacts" value="signal" class="mr-2">
                                            <span class="font-medium">Signal</span>
                                        </label>
                                        <input type="text" id="signalId" name="signalId" 
                                               class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="Phone Number" disabled>
                                    </div>
                                    
                                    <div>
                                        <label class="flex items-center mb-2">
                                            <input type="checkbox" id="primaryJabber" name="primaryContacts" value="jabber" class="mr-2">
                                            <span class="font-medium">Jabber</span>
                                        </label>
                                        <input type="text" id="jabberId" name="jabberId" 
                                               class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="username@domain.com" disabled>
                                    </div>
                                    
                                    <div>
                                        <label class="flex items-center mb-2">
                                            <input type="checkbox" id="primaryEmail" name="primaryContacts" value="email" class="mr-2">
                                            <span class="font-medium">Email</span>
                                        </label>
                                        <input type="email" id="emailAddress" name="emailAddress" 
                                               class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="example@domain.com" disabled>
                                    </div>
                                    
                                    <div>
                                        <label class="flex items-center mb-2">
                                            <input type="checkbox" id="primaryThreema" name="primaryContacts" value="threema" class="mr-2">
                                            <span class="font-medium">Threema</span>
                                        </label>
                                        <input type="text" id="threemaId" name="threemaId" 
                                               class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="Threema ID" disabled>
                                    </div>
                                </div>
                            </div>
                            <div class="validation-message" id="primaryContacts-validation"></div>
                        </div>

                        <div class="mb-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Secondary Contact (Select at least one)</h3>
                            <div class="space-y-4">
                                <div class="grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="flex items-center mb-2">
                                            <input type="checkbox" id="secondaryTelegram" name="secondaryContacts" value="telegram" class="mr-2">
                                            <span class="font-medium">Telegram</span>
                                        </label>
                                        <input type="text" id="secondaryTelegramId" name="secondaryTelegramId" 
                                               class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="@username" disabled>
                                    </div>
                                    
                                    <div>
                                        <label class="flex items-center mb-2">
                                            <input type="checkbox" id="secondarySignal" name="secondaryContacts" value="signal" class="mr-2">
                                            <span class="font-medium">Signal</span>
                                        </label>
                                        <input type="text" id="secondarySignalId" name="secondarySignalId" 
                                               class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="Phone Number" disabled>
                                    </div>
                                    
                                    <div>
                                        <label class="flex items-center mb-2">
                                            <input type="checkbox" id="secondaryJabber" name="secondaryContacts" value="jabber" class="mr-2">
                                            <span class="font-medium">Jabber</span>
                                        </label>
                                        <input type="text" id="secondaryJabberId" name="secondaryJabberId" 
                                               class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="username@domain.com" disabled>
                                    </div>
                                    
                                    <div>
                                        <label class="flex items-center mb-2">
                                            <input type="checkbox" id="secondaryEmail" name="secondaryContacts" value="email" class="mr-2">
                                            <span class="font-medium">Email</span>
                                        </label>
                                        <input type="email" id="secondaryEmailAddress" name="secondaryEmailAddress" 
                                               class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="example@domain.com" disabled>
                                    </div>
                                    
                                    <div>
                                        <label class="flex items-center mb-2">
                                            <input type="checkbox" id="secondaryThreema" name="secondaryContacts" value="threema" class="mr-2">
                                            <span class="font-medium">Threema</span>
                                        </label>
                                        <input type="text" id="secondaryThreemaId" name="secondaryThreemaId" 
                                               class="input-field w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                               placeholder="Threema ID" disabled>
                                    </div>
                                </div>
                            </div>
                            <div class="validation-message" id="secondaryContacts-validation"></div>
                        </div>
                    </div>

                    <!-- Step 4: Review & Submit -->
                    <div class="form-step" id="step4">
                        <h2 class="text-2xl font-semibold text-gray-900 mb-6">Review Information</h2>
                        
                        <div class="bg-gray-50 rounded-lg p-6 mb-6">
                            <h3 class="text-lg font-medium text-gray-900 mb-4">Application Summary</h3>
                            <div id="applicationSummary" class="space-y-2 text-sm text-gray-600">
                                <!-- Application summary will be generated dynamically by JavaScript -->
                            </div>
                        </div>

                        <div class="bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6">
                            <div class="flex items-start">
                                <div class="flex-shrink-0">
                                    <svg class="w-5 h-5 text-blue-600 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                                <div class="ml-3">
                                    <h3 class="text-sm font-medium text-blue-800">Important Notice</h3>
                                    <div class="mt-2 text-sm text-blue-700">
                                        <p>Please review the information carefully. After submission, your application will enter the review process. You can track the progress using your application ID during the review period.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center mb-6">
                            <input type="checkbox" id="agreeTerms" name="agreeTerms" required 
                                   class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                            <label for="agreeTerms" class="ml-2 text-sm text-gray-700">
                                I have read and agree to the <a href="#" onclick="showTermsModal(); return false;" class="text-blue-600 hover:text-blue-500 underline">Terms of Service</a>
                            </label>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="flex justify-between items-center mt-8 pt-6 border-t border-gray-200">
                        <button type="button" id="prevBtn" onclick="changeStep(-1)" 
                                class="btn-secondary text-white px-6 py-3 rounded-lg font-semibold" style="display: none;">
                            Previous
                        </button>
                        <div class="flex-1"></div>
                        <div class="flex space-x-4">
                            <button type="button" id="nextBtn" onclick="changeStep(1)" 
                                    class="btn-primary text-white px-6 py-3 rounded-lg font-semibold">
                                Next
                            </button>
                            <button type="submit" id="submitBtn" 
                                    class="btn-primary text-white px-8 py-3 rounded-lg font-semibold" style="display: none;">
                                Submit Application
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Terms of Service Modal -->
    <div id="termsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col">
            <div class="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center">
                <h3 class="text-2xl font-semibold text-gray-900">Terms of Service â€“ Co-op Members</h3>
                <button onclick="closeTermsModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            <div class="flex-1 overflow-y-auto px-6 py-6">
                <div class="prose max-w-none text-gray-700 space-y-6">
                    <div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">1. Bond Requirement & Trade Capacity</h4>
                        <p class="mb-2">To protect buyers and maintain marketplace integrity, each Co-op Member is required to post a security bond upon approval.</p>
                        <ul class="list-disc list-inside space-y-1 ml-4">
                            <li>A member's Total Trade Capacity (TTC) is determined by a multiplier applied to their posted bond, based on their Co-op Member Level.</li>
                            <li>Co-op Member Level is determined strictly by:
                                <ul class="list-disc list-inside ml-6 mt-1 space-y-1">
                                    <li>Cumulative trade volume, and</li>
                                    <li>Time active on the platform</li>
                                </ul>
                            </li>
                            <li>Reputation, past experience, or external references may be considered during onboarding, but do not directly determine level progression.</li>
                        </ul>
                        <p class="mt-2">The bond is refundable at any time, subject to the conditions outlined in this agreement.</p>
                    </div>

                    <div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">2. Liquidation & Buyer Protection</h4>
                        <p class="mb-2">In the event a Co-op Member is liquidated due to misconduct, breach of terms, or failure to fulfill obligations:</p>
                        <ul class="list-disc list-inside space-y-1 ml-4">
                            <li>The member's bond and any withheld or escrowed funds may be confiscated.</li>
                            <li>Confiscated funds will be distributed to affected customers or counterparties in accordance with cooperative dispute-resolution procedures.</li>
                        </ul>
                    </div>

                    <div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">3. Service & Conduct Standards</h4>
                        <p class="mb-2">Co-op Members must comply with strict operational and ethical standards, including but not limited to:</p>
                        <ul class="list-disc list-inside space-y-1 ml-4">
                            <li>Adherence to postage and fulfillment guidelines</li>
                            <li>Ongoing product quality control</li>
                            <li>Accurate product representation</li>
                        </ul>
                        <p class="mt-2">All published policies, guidelines, and operational notices form part of these Terms once issued.</p>
                    </div>

                    <div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">4. Non-Compliance & Enforcement</h4>
                        <p class="mb-2">Failure to comply may result in one or more of the following, at the discretion of the cooperative administration:</p>
                        <ul class="list-disc list-inside space-y-1 ml-4">
                            <li>Regression or downgrade of Co-op Member level</li>
                            <li>Temporary or permanent suspension of trading privileges</li>
                            <li>Termination of membership</li>
                            <li>Forfeiture of bond, with or without refund depending on severity</li>
                            <li>Confiscation of funds related to unresolved or disputed transactions</li>
                        </ul>
                        <p class="mt-2">Severe or repeated violations may result in permanent exclusion from the cooperative.</p>
                    </div>

                    <div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">5. Communication Restrictions</h4>
                        <p class="mb-2">Co-op Members agree not to exchange direct contact details with customers without prior written approval from the cooperative.</p>
                        <p>All customer communication must occur through approved platform channels unless otherwise authorized.</p>
                    </div>

                    <div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">6. Escrow & Settlement Periods</h4>
                        <p class="mb-2">All transactions are subject to mandatory escrow periods, typically 1â€“3 days, unless otherwise specified.</p>
                        <p>Participation constitutes explicit agreement to all escrow, settlement, and release rules.</p>
                    </div>

                    <div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">7. Fees & Contributions</h4>
                        <p class="mb-2">Fees are assessed on a case-by-case basis, taking into account service usage, risk profile, and Co-op Member level.</p>
                        <ul class="list-disc list-inside space-y-1 ml-4">
                            <li>Fees will generally not exceed 10% of the transaction value unless otherwise agreed in writing.</li>
                            <li>The allocation and use of collected fees shall be determined by the collective, through cooperative governance mechanisms, and may include (but are not limited to):
                                <ul class="list-disc list-inside ml-6 mt-1 space-y-1">
                                    <li>Platform maintenance and infrastructure</li>
                                    <li>Dispute resolution and buyer protection</li>
                                    <li>Security, audits, and risk mitigation</li>
                                    <li>Development of cooperative tools and services</li>
                                    <li>Community initiatives approved by the collective</li>
                                </ul>
                            </li>
                        </ul>
                        <p class="mt-2">Fee allocation decisions may be updated periodically in accordance with collective resolutions and published governance outcomes.</p>
                    </div>

                    <div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-3">8. Acceptance</h4>
                        <p>By applying for or continuing as a Co-op Member, the member confirms acceptance of these Terms and any future amendments issued by the cooperative.</p>
                    </div>
                </div>
            </div>
            <div class="sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end">
                <button onclick="closeTermsModal()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold">
                    I Understand
                </button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-2xl p-8 max-w-2xl mx-4">
            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
            </div>
            <h3 class="text-xl font-semibold text-gray-900 mb-2 text-center">Application Submitted Successfully!</h3>
            <p class="text-center text-gray-600 mb-4">
                Application ID: <span id="applicationId" class="font-semibold text-blue-600 text-lg"></span>
            </p>
            
            <!-- Status -->
            <div class="bg-blue-50 rounded-lg p-4 mb-4 text-center">
                <p class="text-sm font-semibold text-blue-700 mb-2">Status: <span id="applicationStatus" class="text-blue-600">Pending</span></p>
            </div>
            
            <p class="text-sm text-gray-500 mb-6 text-center">We will complete the review within 3-5 business days. Please be patient.</p>
            
            <div class="flex space-x-4">
                <button onclick="trackApplicationStatus()" class="btn-primary text-white px-6 py-2 rounded-lg font-semibold flex-1">
                    Track Status
                </button>
                <button onclick="closeSuccessModal()" class="bg-gray-200 text-gray-700 px-6 py-2 rounded-lg font-semibold flex-1">
                    Close
                </button>
            </div>
        </div>
    </div>

    <script th:src="@{/vendor/logger.js}"></script>
    <script th:src="@{/vendor/api-config.js}"></script>
    <script th:src="@{/vendor/vendor-auth-status.js}"></script>
    <script th:src="@{/vendor/application.js}"></script>
    <script>
        // Terms of Service Modal functions
        function showTermsModal() {
            const modal = document.getElementById('termsModal');
            if (modal) {
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden'; // Prevent background scrolling
            }
        }

        function closeTermsModal() {
            const modal = document.getElementById('termsModal');
            if (modal) {
                modal.classList.add('hidden');
                document.body.style.overflow = ''; // Restore scrolling
            }
        }

        // Close modal when clicking outside
        document.addEventListener('DOMContentLoaded', function() {
            const termsModal = document.getElementById('termsModal');
            if (termsModal) {
                termsModal.addEventListener('click', function(e) {
                    if (e.target === termsModal) {
                        closeTermsModal();
                    }
                });
            }

            // Initialize auth status on page load
            if (typeof VendorAuthStatus !== 'undefined') {
                VendorAuthStatus.init({
                    showInNav: true,
                    showFloating: false,
                    requiredLogin: false  // Application page may be accessed before login
                });
            }
        });
    </script>
</body>
</html>